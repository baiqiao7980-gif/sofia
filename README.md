# 模拟客服平台

一个功能完整的模拟客服平台，包含用户对话系统和管理员后台。采用现代化UI设计，支持实时通信和响应式布局。

## ✨ 功能特性

### 🔐 用户认证系统
- **用户注册/登录** - 支持新用户注册和现有用户登录
- **管理员登录** - 专用管理员账户（用户名：admin，密码：admin123）
- **JWT身份验证** - 安全的token认证机制
- **自动登录状态检测** - 保持用户登录状态

### 💬 实时对话功能
- **Socket.IO实时通信** - 即时消息收发
- **现代化聊天界面** - 美观的对话气泡设计
- **消息历史记录** - 自动保存和加载聊天记录
- **表情符号支持** - 快速插入常用表情
- **响应式设计** - 适配各种设备屏幕

### 🛠️ 管理员后台
- **数据统计面板** - 用户数量、消息统计、活跃度分析
- **用户管理** - 查看所有注册用户信息
- **对话记录管理** - 查看所有用户对话历史
- **在线客服功能** - 管理员可直接回复用户消息
- **实时数据更新** - 自动刷新统计数据

### 🔒 安全特性
- **密码加密存储** - 使用bcrypt加密用户密码
- **请求限流** - 防止恶意请求攻击
- **XSS防护** - 消息内容自动转义
- **CORS安全配置** - 跨域请求安全控制

## 🚀 快速开始

### 环境要求
- Node.js 14.0 或更高版本
- npm 或 yarn 包管理器

### 本地开发

1. **安装依赖**
```bash
npm install
```

2. **启动服务器**
```bash
npm start
```

3. **开发模式启动**（可选）
```bash
npm run dev
```

4. **访问应用**
打开浏览器访问：`http://localhost:3000`

### 🌐 部署到Vercel

本项目已配置好Vercel部署，可以一键部署到云端：

#### 方法一：通过Vercel CLI
```bash
# 安装Vercel CLI
npm i -g vercel

# 登录Vercel
vercel login

# 部署项目
vercel
```

#### 方法二：通过GitHub + Vercel
1. 将代码推送到GitHub仓库
2. 在 [Vercel官网](https://vercel.com) 登录
3. 点击"New Project"导入GitHub仓库
4. 自动部署完成

#### 方法三：拖拽部署
1. 将项目文件夹压缩为zip
2. 访问 [Vercel官网](https://vercel.com)
3. 直接拖拽zip文件到部署区域

**注意**: Vercel部署后，由于Serverless环境限制，Socket.IO实时功能可能受影响。建议本地开发测试完整功能。

## 📱 使用说明

### 普通用户使用
1. 访问首页进行注册或登录
2. 登录后自动跳转到聊天界面
3. 在聊天界面发送消息与客服对话
4. 支持发送文字消息和表情符号

### 管理员使用
1. 使用管理员账户登录（用户名：admin，密码：admin123）
2. 登录后自动跳转到管理后台
3. 查看数据统计、用户管理、对话记录
4. 在"在线客服"页面回复用户消息

## 🏗️ 技术架构

### 后端技术栈
- **Express.js** - Web应用框架
- **Socket.IO** - 实时通信
- **SQLite3** - 轻量级数据库
- **JWT** - 身份认证
- **bcryptjs** - 密码加密
- **Helmet** - 安全中间件

### 前端技术栈
- **原生JavaScript** - 核心逻辑
- **CSS3** - 现代化样式设计
- **Font Awesome** - 图标库
- **Animate.css** - 动画效果
- **Socket.IO Client** - 实时通信客户端

### 数据库设计
- **users表** - 存储用户信息和认证数据
- **messages表** - 存储所有对话消息记录

## 📂 项目结构

```
customer-service-platform/
├── server.js              # 服务器主文件
├── package.json           # 项目配置和依赖
├── vercel.json            # Vercel部署配置
├── .gitignore             # Git忽略文件
├── database.db           # SQLite数据库文件（自动生成）
├── public/               # 静态文件目录
│   ├── index.html        # 登录页面
│   ├── chat.html         # 用户对话页面
│   └── admin.html        # 管理员后台
└── README.md             # 项目说明文档
```

## 🔧 配置说明

### 环境变量
- `PORT` - 服务器端口（默认：3000）
- `JWT_SECRET` - JWT密钥（默认：customer_service_secret_key_2024）
- `NODE_ENV` - 运行环境（production/development）

### 安全配置
- 请求限流：15分钟内最多100个请求
- JWT过期时间：24小时
- 密码最小长度：6位字符

## 🌟 功能亮点

1. **零配置启动** - 无需复杂配置，一键启动
2. **自动数据库初始化** - 首次运行自动创建数据库和表
3. **响应式设计** - 完美适配手机、平板、桌面设备
4. **实时通信** - 基于WebSocket的即时消息传输
5. **现代化UI** - 渐变色彩、圆角设计、流畅动画
6. **安全可靠** - 多层安全防护，生产级别的安全标准
7. **云端部署** - 支持Vercel一键部署到云端

## 📝 开发说明

### 添加新功能
1. 后端API路由添加到 `server.js`
2. 前端页面放置在 `public/` 目录
3. 数据库表结构修改需要手动更新

### 自定义样式
- 所有样式都内联在HTML文件中
- 使用CSS变量可以快速修改主题色彩
- 响应式断点：768px（移动端）

### 部署注意事项
- Vercel环境下SQLite数据库是临时的，重启后数据会丢失
- 生产环境建议使用外部数据库（如PlanetScale、Supabase）
- Socket.IO在Serverless环境下功能受限

## 🤝 贡献指南

欢迎提交Issue和Pull Request来改进这个项目！

## 📄 许可证

MIT License - 详见 LICENSE 文件

## 🎯 未来计划

- [ ] 添加文件上传功能
- [ ] 支持多媒体消息（图片、语音）
- [ ] 添加消息搜索功能
- [ ] 实现用户分组管理
- [ ] 添加消息推送通知
- [ ] 支持多语言界面
- [ ] 集成外部数据库支持

---

**开发者**: Sofia  
**版本**: 1.0.0  
**最后更新**: 2024年